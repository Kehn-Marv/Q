# QIDE Deployment Guide

## Prerequisites
- Node.js 18+
- Supabase account
- Vercel account (for deployment)

## Local Development

1. **Install Dependencies**
   ```bash
   npm install
   ```

2. **Configure Environment**
   - Copy `.env.local` or create from `.env.example`
   - Add your Supabase credentials

3. **Database Setup**
   - The database schema has already been applied via Supabase migrations
   - Tables include: profiles, decision_fields, decision_outcomes, collapsed_decisions, insight_journal
   - All tables have Row Level Security (RLS) enabled

4. **Run Development Server**
   ```bash
   npm run dev
   ```
   Visit http://localhost:3000

## Production Deployment (Vercel)

1. **Push to Git Repository**
   ```bash
   git init
   git add .
   git commit -m "Initial QIDE commit"
   git remote add origin <your-repo-url>
   git push -u origin main
   ```

2. **Deploy to Vercel**
   - Visit https://vercel.com
   - Import your repository
   - Add environment variables:
     - `NEXT_PUBLIC_SUPABASE_URL`
     - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - Deploy!

3. **Verify Deployment**
   - Test authentication flow
   - Create a test decision field
   - Verify database connections

## Environment Variables

Required variables:
- `NEXT_PUBLIC_SUPABASE_URL` - Your Supabase project URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Your Supabase anonymous key

## Database Schema

The following tables are created:

### profiles
User profile data linked to Supabase auth

### decision_fields
Decision scenarios created by users

### decision_outcomes
Probabilistic outcomes generated by quantum analysis

### collapsed_decisions
Final recommendations after field collapse

### insight_journal
Historical tracking of decisions and outcomes

All tables use RLS policies to ensure users can only access their own data.

## Build Commands

```bash
# Development
npm run dev

# Production build
npm run build

# Start production server
npm start

# Lint code
npm run lint
```

## Troubleshooting

**Build fails:**
- Ensure all dependencies are installed: `npm install`
- Check Node.js version: `node --version` (should be 18+)

**Database connection fails:**
- Verify Supabase credentials in `.env.local`
- Check Supabase project is active
- Verify RLS policies are applied

**Authentication issues:**
- Confirm Supabase Auth is enabled
- Check email provider settings in Supabase dashboard
- Verify NEXT_PUBLIC_SUPABASE_ANON_KEY is correct

## Performance Optimization

The build is optimized with:
- Next.js 15 App Router for optimal code splitting
- Static page generation where possible
- Minimal bundle size (~103 kB first load)
- Server-side rendering for dynamic routes

## Security Notes

- All database queries use RLS policies
- Users can only access their own data
- Authentication required for all protected routes
- Sensitive operations require valid session tokens
